webpackJsonp([2],{"3LeL":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("UllL"),i={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container card mb-3"},[s("div",{staticClass:"d-flex justify-content-between p-2 pt-2"},[s("span",{staticClass:"lead text-secondary pt-2"},[t._v(t._s(t.termsData.name?t.termsData.name:"未读取文件")+" "+t._s(t.termsData.size?t.termsData.mbSize:0))]),t._v(" "),s("div",{attrs:{id:"fileUpBox"}},[s("label",{staticClass:"btn border",attrs:{title:"载入键道单字"}},[t._v("键道单字")]),t._v(" "),s("label",{staticClass:"btn border",class:{"btn-danger":t.notUpFileClass},attrs:{for:"file",title:"上传词库文件"}},[t._v("上传")]),t._v(" "),s("input",{ref:"file",attrs:{id:"file",type:"file"},on:{change:t.readFile}})])]),t._v(" "),s("div",{staticClass:"d-flex mx-auto flex-row justify-content-center align-items-center p-3"},[s("label",{staticClass:"border-0",attrs:{id:"word"}},[t._v(t._s(t.word))]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.code,expression:"code"}],staticClass:"border rounded px-2",class:{"":0==t.status,"border-primary":1==t.status,"border-success":2==t.status,"border-danger":-1==t.status},attrs:{id:"code",maxlength:"8",type:"text",autocomplete:"off",title:"请输入编码"},domProps:{value:t.code},on:{click:t.isReadFile,keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"space",32,e.key))return null;t.isRight(e)},keydown:function(e){if(!("button"in e)&&t._k(e.keyCode,"space",32,e.key))return null;e.preventDefault()},input:function(e){e.target.composing||(t.code=e.target.value)}}})]),t._v(" "),t._m(0),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.message.show,expression:"message.show"}],staticClass:"fixed-top w-20 alert p-3",class:t.message.class,attrs:{id:"message"}},[t._v("\n    "+t._s(t.message.cont)+"\n  ")])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("p",{staticClass:"text-center"},[this._v("V.Beta 1.0")]),this._v(" "),e("p",{staticClass:"text-center"},[this._v("请选择一个Rime词库后上传体验，输入编码后空格键确定，校验成功后自动下一个。")]),this._v(" "),e("p",{staticClass:"text-center"},[this._v("使用英文输入法")])])}]};var n=function(t){s("TVYq")},r=s("VU/8")(a.a,i,!1,n,null,null);e.default=r.exports},TVYq:function(t,e){},UllL:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_exports__.a={name:"study",data:function(){return{word:"字词",code:"",status:0,jdl:"",termsData:{},computedData:[],codeClass:"",notUpFileClass:!1,message:{show:!1,class:"",cont:""},closeTimer:!1,nextData:{word:"",code:""},errNum:2}},methods:{isReadFile:function(){if(!this.termsData.size)return this.notUpFileClass=!0,void this.showMessage({show:!0,class:"alert-danger",cont:"未读取词库文件，请点击上传选择词库文件。"})},isRight:function isRight(){var x;this.isFileSize();var reg=new RegExp("^.{"+this.errNum+"}");this.code.length>=1&&(this.nextData.code==this.code&&this.nextData.word==this.word?(this.showMessage({show:!0,class:"alert-info",cont:"编码："+this.nextData.code+"\t词条："+this.nextData.word+"\t√"}),this.status=2,this.next()):(this.status=-1,this.showMessage({show:!0,class:"alert-danger",cont:"错误请重新输入\t提示：共有"+this.nextData.code.length+"位，前"+this.errNum+"位是："+this.nextData.code.match(eval(reg))+"\t×"}),this.nextData.code.length>this.errNum&&this.errNum++))},next:function(){var t=this;function e(){var e=Math.floor(Math.random()*t.termsData.content.length+1);e%2==0&&e++,t.status=0,t.nextData.word=t.word=t.termsData.content[e],t.nextData.code=t.code=t.termsData.content[e-1],t.code=""}setTimeout(e,300)},splitTerms:function(t){this.termsData.content=t.split(/[\t\n]/)},isFileSize:function(){this.termsData.size||this.isReadFile()},readFile:function(){var t=this;if(this.$refs.file.files.length){var e=this.$refs.file.files[this.$refs.file.files.length-1],s=new FileReader;/yaml|txt|xls/.test(e.name)?(this.termsData=this.$refs.file.files[this.$refs.file.files.length-1],this.termsData.mbSize=this.kbToMb(this.termsData.size),this.termsData.result="",s.onload=function(){t.termsData.result=this.result,t.splitTerms(this.result)},s.readAsText(e),this.notUpFileClass=!1,this.next(),this.showMessage({show:!0,class:"alert-success",cont:"词库已加载。"})):this.showMessage({show:!0,class:"alert-danger",cont:"您上传的"+e.name+"文件格式不受支持。"})}},kbToMb:function kbToMb(data){var computedData=parseFloat(data);return computedData<1048576?eval(computedData/1024).toFixed(1)+"KB":eval(computedData/1048576).toFixed(1)+"MB"},showMessage:function(t){this.message=t,this.closeMessage()},closeMessage:function(){var t=this;setTimeout(function(){t.message={show:!1,class:"",cont:""}},3e3)}}}}});
//# sourceMappingURL=2.001ecc34c882d6649527.js.map