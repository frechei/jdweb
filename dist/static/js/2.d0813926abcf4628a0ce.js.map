{"version":3,"sources":["webpack:///./src/components/Tools/Study/Study.vue?80f7","webpack:///./src/components/Tools/Study/Study.vue","webpack:///src/components/Tools/Study/Study.vue"],"names":["Study_Study","render","_vm","this","_h","$createElement","_c","_self","staticClass","_m","_v","_s","termsData","name","size","mbSize","attrs","id","class","btn-danger","notUpFileClass","for","title","ref","type","on","change","readFile","word","directives","rawName","value","expression","","status","border-primary","border-success","border-danger","maxlength","autocomplete","domProps","click","isReadFile","keyup","$event","_k","keyCode","key","isRight","keydown","preventDefault","input","target","composing","code","message","cont","staticRenderFns","__vue_styles__","ssrContext","__webpack_require__","Component","normalizeComponent","Study","__webpack_exports__","x","isFileSize","errNum","next","reg","random","FileReader","result","file","data","closeMessage"],"mappings":"uHAGAA,GADiBC,OAFjB,WAA0B,IAAAC,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,wBAAkCN,EAAAO,GAAA,GAAAP,EAAAQ,GAAA,KAAAJ,EAAA,OAAkCE,YAAA,4CAAsDF,EAAA,QAAaE,YAAA,6BAAuCN,EAAAQ,GAAAR,EAAAS,GAAAT,EAAAU,UAAAC,KAAAX,EAAAU,UAAAC,KAAA,aAAAX,EAAAS,GAAAT,EAAAU,UAAAE,KAAAZ,EAAAU,UAAAG,OAAA,MAAAb,EAAAQ,GAAA,KAAAJ,EAAA,OAAsJU,OAAOC,GAAA,eAAkBX,EAAA,SAAcE,YAAA,aAAAU,OAAgCC,aAAAjB,EAAAkB,gBAAgCJ,OAAQK,IAAA,OAAAC,MAAA,YAA+BpB,EAAAQ,GAAA,QAAAR,EAAAQ,GAAA,KAAAJ,EAAA,SAAyCiB,IAAA,OAAAP,OAAkBC,GAAA,OAAAO,KAAA,QAA0BC,IAAKC,OAAAxB,EAAAyB,gBAAuBzB,EAAAQ,GAAA,KAAAJ,EAAA,OAA4BE,YAAA,0EAAoFF,EAAA,SAAcE,YAAA,WAAAQ,OAA8BC,GAAA,UAAaf,EAAAQ,GAAAR,EAAAS,GAAAT,EAAA0B,SAAA1B,EAAAQ,GAAA,KAAAJ,EAAA,SAAqDuB,aAAahB,KAAA,QAAAiB,QAAA,UAAAC,MAAA7B,EAAA,KAAA8B,WAAA,SAAkExB,YAAA,sBAAAU,OAA2Ce,GAAA,GAAA/B,EAAAgC,OAAAC,iBAAA,GAAAjC,EAAAgC,OAAAE,iBAAA,GAAAlC,EAAAgC,OAAAG,iBAAA,GAAAnC,EAAAgC,QAA4HlB,OAAQC,GAAA,OAAAqB,UAAA,IAAAd,KAAA,OAAAe,aAAA,MAAAjB,MAAA,SAA+EkB,UAAWT,MAAA7B,EAAA,MAAmBuB,IAAKgB,MAAAvC,EAAAwC,WAAAC,MAAA,SAAAC,GAAgD,gBAAAA,IAAA1C,EAAA2C,GAAAD,EAAAE,QAAA,WAAAF,EAAAG,KAAwE,YAAe7C,EAAA8C,QAAAJ,IAAoBK,QAAA,SAAAL,GAA4B,gBAAAA,IAAA1C,EAAA2C,GAAAD,EAAAE,QAAA,WAAAF,EAAAG,KAAwE,YAAeH,EAAAM,kBAAyBC,MAAA,SAAAP,GAA0BA,EAAAQ,OAAAC,YAAsCnD,EAAAoD,KAAAV,EAAAQ,OAAArB,aAA+B7B,EAAAQ,GAAA,KAAAR,EAAAO,GAAA,GAAAP,EAAAQ,GAAA,KAAAR,EAAAO,GAAA,GAAAP,EAAAQ,GAAA,KAAAJ,EAAA,OAAsEuB,aAAahB,KAAA,OAAAiB,QAAA,SAAAC,MAAA7B,EAAAqD,QAAA,KAAAvB,WAAA,iBAAgFxB,YAAA,2BAAAU,MAAAhB,EAAAqD,QAAArC,MAAAF,OAAwEC,GAAA,aAAgBf,EAAAQ,GAAA,SAAAR,EAAAS,GAAAT,EAAAqD,QAAAC,MAAA,aAE32DC,iBADjB,WAAoC,IAAarD,EAAbD,KAAaE,eAA0BC,EAAvCH,KAAuCI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,MAAgBE,YAAA,qCAA/EL,KAA8HO,GAAA,YAAAJ,EAAA,SAA9HH,KAA8HO,GAAA,eAAsD,WAAc,IAAaN,EAAbD,KAAaE,eAA0BC,EAAvCH,KAAuCI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,SAAmBF,EAAA,KAAUE,YAAA,gBAA7GL,KAAuIO,GAAA,oBAA4B,WAAc,IAAaN,EAAbD,KAAaE,eAA0BC,EAAvCH,KAAuCI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,2BAAqCF,EAAA,KAAUE,YAAA,+BAA/HL,KAAwKO,GAAA,sBAAxKP,KAAwKO,GAAA,KAAAJ,EAAA,KAAmDE,YAAA,+BAA3NL,KAAoQO,GAAA,kBAApQP,KAAoQO,GAAA,KAAAJ,EAAA,KAA+CE,YAAA,+BAAnTL,KAA4VO,GAAA,sBAA5VP,KAA4VO,GAAA,KAAAJ,EAAA,KAAmDE,YAAA,+BAA/YL,KAAwbO,GAAA,uBCE/0B,IASAgD,EAZA,SAAAC,GACAC,EAAA,SAgBAC,EAdAD,EAAA,OAcAE,CACAC,EAAA,EACA/D,GATA,EAWA0D,EAPA,KAEA,MAUAM,EAAA,QAAAH,EAAA,2GCQAG,oBAAA,QAEA,oCAGA,UACA,UACA,MACA,0CAGA,mBACA,iBAEA,QACA,QAEA,gBACA,iBAEA,QAEA,WAEA,2DAWA,4BANA,+BAEA,QACA,eAEAR,KAAA,yDAOAS,OADAC,2CAEAC,OAAA,UAEA,kDACA,uDAEA,iFAIA,QACA,iEAEAvC,KAAA,oBACA,cACA,OACAwC,sBAGA,0BAEA,QACA,qHAEAC,MAAA,oDACAF,kCAKAhE,4EAGA,WAEAmE,aAEA,6CACAA,gDACA,UACA,gBATA,4DAaA,2DAIA5B,wCAMAvC,qCACA,0DACA,SACAoE,0GAQA,oDACAzD,4BAEA,+CAEA0D,yBACAA,sBAIAC,wBAEA,OAEAL,+BAEA,QACA,qBAEA,oCAxBA,QACA,6BAEAvD,KAAA,yEA2BA6D,qEAEA,2CAEA,2CAKAA,OACAC,8CAGAxE,4CAGA,QACA,QAEA,KACA","file":"static/js/2.d0813926abcf4628a0ce.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container card mb-3\"},[_vm._m(0),_vm._v(\" \"),_c('div',{staticClass:\"d-flex justify-content-between p-2 pt-2\"},[_c('span',{staticClass:\"lead text-secondary pt-1\"},[_vm._v(_vm._s(_vm.termsData.name ? _vm.termsData.name : '未读取文件')+\" \"+_vm._s(_vm.termsData.size ? _vm.termsData.mbSize : 0))]),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"fileUpBox\"}},[_c('label',{staticClass:\"btn border\",class:{'btn-danger':_vm.notUpFileClass},attrs:{\"for\":\"file\",\"title\":\"上传词库文件\"}},[_vm._v(\"上传\")]),_vm._v(\" \"),_c('input',{ref:\"file\",attrs:{\"id\":\"file\",\"type\":\"file\"},on:{\"change\":_vm.readFile}})])]),_vm._v(\" \"),_c('div',{staticClass:\"d-flex mx-auto flex-row justify-content-center align-items-center p-3\"},[_c('label',{staticClass:\"border-0\",attrs:{\"id\":\"word\"}},[_vm._v(_vm._s(_vm.word))]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.code),expression:\"code\"}],staticClass:\"border rounded px-2\",class:{'': _vm.status == 0, 'border-primary': _vm.status == 1,'border-success': _vm.status == 2, 'border-danger': _vm.status == -1},attrs:{\"id\":\"code\",\"maxlength\":\"6\",\"type\":\"text\",\"autocomplete\":\"off\",\"title\":\"请输入编码\"},domProps:{\"value\":(_vm.code)},on:{\"click\":_vm.isReadFile,\"keyup\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"space\",32,$event.key)){ return null; }_vm.isRight($event)},\"keydown\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"space\",32,$event.key)){ return null; }$event.preventDefault();},\"input\":function($event){if($event.target.composing){ return; }_vm.code=$event.target.value}}})]),_vm._v(\" \"),_vm._m(1),_vm._v(\" \"),_vm._m(2),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.message.show),expression:\"message.show\"}],staticClass:\"fixed-top w-20 alert p-3\",class:_vm.message.class,attrs:{\"id\":\"message\"}},[_vm._v(\"\\n    \"+_vm._s(_vm.message.cont)+\"\\n  \")])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('h1',{staticClass:\"title-name lead text-center py-2\"},[_vm._v(\"单字词组练习工具\"),_c('small',[_vm._v(\"Rime词库\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"lead\"},[_c('p',{staticClass:\"text-center\"},[_vm._v(\"version 1.0\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"lead help-div row py-5\"},[_c('p',{staticClass:\"col-6 col-md-3 text-center\"},[_vm._v(\"一、请选择一个Rime词库上传。\")]),_vm._v(\" \"),_c('p',{staticClass:\"col-6 col-md-3 text-center\"},[_vm._v(\"二、切换使用英文输入法。\")]),_vm._v(\" \"),_c('p',{staticClass:\"col-6 col-md-3 text-center\"},[_vm._v(\"三、输入对应词条编码，空格确定。\")]),_vm._v(\" \"),_c('p',{staticClass:\"col-6 col-md-3 text-center\"},[_vm._v(\"四、校验成功自动下一个。\")])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-580c45b6\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Tools/Study/Study.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-580c45b6\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Study.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Study.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Study.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-580c45b6\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Study.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Tools/Study/Study.vue\n// module id = null\n// module chunks = ","<template>\n  <div class=\"container card mb-3\">\n    <h1 class=\"title-name lead text-center py-2\">单字词组练习工具<small>Rime词库</small></h1>\n    <div class=\"d-flex justify-content-between p-2 pt-2\">\n      <span class=\"lead text-secondary pt-1\">{{termsData.name ? termsData.name : '未读取文件'}}&nbsp;{{termsData.size ? termsData.mbSize : 0}}</span>\n      <div id=\"fileUpBox\" class=\"\">\n        <!-- <label class=\"btn border\" title=\"载入键道单字\">键道单字</label> -->\n        <label class=\"btn border\" :class=\"{'btn-danger':notUpFileClass}\" for=\"file\" title=\"上传词库文件\">上传</label>\n        <input id=\"file\" ref=\"file\" @change=\"readFile\" type=\"file\">\n      </div>\n    </div>\n    <div class=\"d-flex mx-auto flex-row justify-content-center align-items-center p-3\">\n      <label id=\"word\" class=\"border-0\">{{word}}</label>\n      <input id=\"code\" class=\"border rounded px-2\" \n            maxlength=\"6\"\n            @click=\"isReadFile\"\n            :class=\"{'': status == 0, 'border-primary': status == 1,'border-success': status == 2, 'border-danger': status == -1}\" type=\"text\"\n            @keyup.space=\"isRight\" @keydown.space.prevent autocomplete=\"off\"\n            v-model=\"code\" title=\"请输入编码\">\n    </div>\n    <div class=\"lead\"><p class=\"text-center\">version 1.0</p></div>\n    <div class=\"lead help-div row py-5\">\n      <p class=\"col-6 col-md-3 text-center\">一、请选择一个Rime词库上传。</p>\n      <p class=\"col-6 col-md-3 text-center\">二、切换使用英文输入法。</p>\n      <p class=\"col-6 col-md-3 text-center\">三、输入对应词条编码，空格确定。</p>\n      <p class=\"col-6 col-md-3 text-center\">四、校验成功自动下一个。</p>\n    </div>\n    <div id=\"message\" class=\"fixed-top w-20 alert p-3\" :class=\"message.class\" v-show=\"message.show\">\n      {{message.cont}}\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'study',\n  data () {\n    return {\n      word: '字词',\n      code: '',\n      status: 0,\n      jdl: '',\n      termsData: {},\n      computedData: [],\n      codeClass: '',\n      notUpFileClass: false,\n      message: {\n        show: false,\n        class: '',\n        cont: ''\n      },\n      closeTimer: false,\n      nextData: {\n        word: '',\n        code: ''\n      },\n      errNum: 2\n    }\n  },\n  methods: {\n    isReadFile: function (){\n      if (!this.termsData.size) {\n        this.notUpFileClass = true;\n        this.showMessage({\n          show: true,\n          class: 'alert-danger',\n          cont: `未读取词库文件，请点击上传选择词库文件。`\n        });\n        return;\n      }\n    },\n    isRight: function () {\n      this.isFileSize();\n\n      var x;\n      var reg = new RegExp(`^.{${this.errNum}}`);\n      var trim = /[\\s+|\\r+|\\n+]/g;\n\n      this.code = this.code.replace(trim, '');\n      this.nextData.code = this.nextData.code.replace(trim, '');\n\n      if (this.code.length >= 1) {\n        if (this.nextData.code == this.code){\n          this.showMessage({\n            show: true,\n            class: 'alert-info',\n            cont: `编码：${this.nextData.code}\\t词条：${this.nextData.word}\\t√`\n          })\n          this.status = 2;\n          this.errNum = 2;\n          this.next();\n        } else {\n          this.status = -1;\n\n          this.showMessage({\n            show: true,\n            class: 'alert-danger',\n            cont: `错误请重新输入\\t提示：共有${this.nextData.code.length}位，前${this.errNum}位是：${this.nextData.code.match(eval(reg))}\\t×`\n          })\n          if (this.nextData.code.length > this.errNum) this.errNum++;\n        }\n      }\n    },\n    next: function (){\n      var __this = this;\n      setTimeout(next, 300);\n      function next(){\n        var random = Math.floor(Math.random()*__this.termsData.content.length+1);\n        if (random % 2 == 0){\n          random++;\n        }\n        __this.status = 0;\n        __this.nextData.word = __this.word = __this.termsData.content[random];\n        __this.nextData.code = __this.code = __this.termsData.content[random+1];\n        __this.code = '';\n      }\n    },\n    splitTerms: function(data) {\n      this.termsData.content = data.split(/[\\t\\n]/);\n    },\n    isFileSize: function (){\n      if (!this.termsData.size) {\n        this.isReadFile();\n        return;\n      }\n    },\n    readFile: function () {\n      var __this = this;\n      \n      if (this.$refs.file.files.length) {\n        var file = this.$refs.file.files[this.$refs.file.files.length-1];\n        var reader = new FileReader();\n        if (!/yaml|txt|xls/.test(file.name)){\n          this.showMessage({\n            show: true,\n            class: 'alert-danger',\n            cont: `您上传的${file.name}文件格式不受支持。`\n          });\n        } else {\n          this.termsData = this.$refs.file.files[this.$refs.file.files.length-1];      \n          this.termsData.mbSize = this.kbToMb(this.termsData.size);\n          this.termsData.result = '';\n\n          reader.onload = function() {\n            __this.termsData.result = this.result;\n            __this.splitTerms(this.result);\n          }\n\n          reader.readAsText(file);\n\n          this.notUpFileClass = false;\n\n          this.next();\n\n          this.showMessage({\n            show: true,\n            class: 'alert-success',\n            cont: '词库已加载。'\n          })\n        }\n\n      }\n    },\n    kbToMb: function (data) {\n      var computedData = parseFloat(data);\n      if (computedData < 1048576){\n        return eval(computedData / 1024).toFixed(1) + 'KB';\n      } else {\n        return eval(computedData / 1048576).toFixed(1) + \"MB\";\n      }\n    },\n    showMessage: function(data){\n      var __this = this;\n      this.message = data;\n      this.closeMessage();\n    },\n    closeMessage: function(){\n      var __this = this;\n      setTimeout(function(){\n        __this.message = {\n          show: false,\n          class: '',\n          cont: ''\n        }\n      }, 3000);\n    }\n  }\n}\n</script>\n\n<style>\n.title-name {\n  font-size: 25px;\n}\n.title-name small {\n  font-size: 14px;\n  font-weight: 100;\n}\n\n.help-div p {\n  font-size: 14px;\n  line-height: 26px;\n}\n\n#word {\n  text-align: center;\n  font-size: 33px;\n  line-height: 35px;\n  margin-bottom: 2px;\n  color: #333;\n}\n#code {\n  font-size: 25px;\n  width: 130px;\n  margin: 0 0 0 20px;\n}\n#fileUpBox label {\n  line-height: 30px;\n  margin-bottom: 0;\n}\n#file {\n  display: none;\n  opacity: 0;\n  filter: opacity(alpha=0)\n}\n#message {\n  max-width: 50%;\n  right: auto;\n  left: 0;\n  top: 70px;\n  box-shadow: 0 0 10px rgba(0,0,0,.2);\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/Tools/Study/Study.vue"],"sourceRoot":""}